#include "FastLED.h"       // Fastled library to control the LEDs
#include "SPIFFS.h"

#define NUM_LEDS 256
#define COLOR_ORDER GRB
#define CHIPSET     WS2812B
#define BRIGHTNESS 2
#define DATA_PIN 13  // Connected to the data pin of the first LED strip

// Define the array of leds
CRGB leds[NUM_LEDS];

// Create the array of retro arcade characters and store it in Flash memory
long DigDug01[] =
{
  0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff,
  0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0xff00ff,
  0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff,
  0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x00008d, 0xff00ff, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0xff00ff, 0x00008d, 0xff00ff,
  0xff00ff, 0x00008d, 0xff00ff, 0x00008d, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x00008d, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff,
  0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x00008d, 0xff00ff, 0x00008d, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x00008d, 0xff00ff,
  0xff00ff, 0x00008d, 0xff00ff, 0x00008d, 0x00008d, 0x00008d, 0xff00ff, 0xff00ff, 0x00008d, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff,
  0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0x00008d, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff,
  0xff00ff, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0x00008d, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff,
  0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff,
  0xff00ff, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff,
  0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff,
  0xff00ff, 0xff00ff, 0x000000, 0x000000, 0x000000, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff,
  0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff,
  0xff00ff, 0xff00ff, 0x000000, 0xff00ff, 0xff00ff, 0x000000, 0x000000, 0x000000, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0x000000, 0x000000, 0x000000, 0xff00ff,
  0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff
};
long DigDug[256];
String fileData;
void setup() {
  Serial.begin(115200);

  if (!SPIFFS.begin(true)) {
    Serial.println("An Error has occurred while mounting SPIFFS");
    return;
  }
  File file2 = SPIFFS.open("/images.txt");

  if (!file2) {
    Serial.println("Failed to open file for reading");
    return;
  }
  String str = file2.readString();
  file2.close();
  //long DigDug[256] = {0};
  for (int i = 0; i < 256; i++) {
    int startIndex = i * 10;
    int endIndex = startIndex + 8;
    String temp = str.substring(startIndex, endIndex);
    char chars[8];
    Serial.print(temp);
    temp.toCharArray(chars, 8);
    //Serial.print(temp);
    Serial.println(chars);
    DigDug[i] = atol(chars);
    Serial.println(DigDug[i]);
    Serial.print(" - ");
    Serial.print(i);
    Serial.println("");

  }


  //Serial.print("HERE" + fileData);
  FastLED.addLeds<CHIPSET, DATA_PIN, COLOR_ORDER>(leds, NUM_LEDS).setCorrection(TypicalSMD5050); // Init of the Fastled library
  FastLED.setBrightness(BRIGHTNESS);
  FastLED.clear(true);
}



void loop() {
  // put your main code here, to run repeatedly:
  frame(DigDug);
  delay(500);
  FastLED.clear(true);
  delay(500);
}

void frame(long arr[]) {
  for (int i = 0; i < NUM_LEDS; i++) {
    leds[i] = arr[i];
  }
  FastLED.show();
}
